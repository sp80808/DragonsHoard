<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Dragon's Hoard 2048</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lato:wght@400;700&display=swap');
      
      :root {
        /* Mouse variables removed as they are no longer needed for the torch */
      }

      body {
        font-family: 'Lato', sans-serif;
        background-color: #050505;
        color: #e2e8f0;
        overflow: hidden; /* Prevent scrolling on mobile swipes */
        touch-action: none;
      }
      
      h1, h2, h3, .fantasy-font {
        font-family: 'Cinzel', serif;
      }

      /* Torch Effect Overlay - Subtle, Breathing, Centered */
      @keyframes torchBreathe {
        0%, 100% { opacity: 0.8; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.05); }
      }

      .torch-overlay {
        position: absolute;
        inset: -50%; /* Extend beyond bounds to ensure gradient covers well */
        width: 200%;
        height: 200%;
        pointer-events: none;
        background: radial-gradient(
          circle at 50% 50%,
          rgba(255, 160, 60, 0.06) 0%,
          rgba(100, 50, 20, 0.02) 40%,
          transparent 70%
        );
        z-index: 45;
        mix-blend-mode: screen;
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        animation: torchBreathe 6s infinite ease-in-out;
      }

      /* Text Outline for Readability */
      .text-outline-black {
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
      }

      /* CRT / Scanline Effect */
      .scanlines {
        background: linear-gradient(
          to bottom,
          rgba(255,255,255,0),
          rgba(255,255,255,0) 50%,
          rgba(0,0,0,0.1) 50%,
          rgba(0,0,0,0.1)
        );
        background-size: 100% 4px;
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        pointer-events: none;
        z-index: 50;
        opacity: 0.12;
      }

      .vignette {
        background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.8) 100%);
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 40;
        transition: box-shadow 1s ease;
      }

      @keyframes bossPulse {
        0% { box-shadow: inset 0 0 0 rgba(220, 38, 38, 0); }
        50% { box-shadow: inset 0 0 100px rgba(185, 28, 28, 0.4); background-color: rgba(69, 10, 10, 0.1); }
        100% { box-shadow: inset 0 0 0 rgba(220, 38, 38, 0); }
      }

      .boss-mode {
        animation: bossPulse 3s infinite;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: #1a202c; }
      ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }

      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

      /* Floating Text Animation - Enhanced */
      @keyframes floatUpLoot {
        0% { transform: translateY(0) scale(0.5); opacity: 0; }
        20% { transform: translateY(-10px) scale(1.1); opacity: 1; }
        100% { transform: translateY(-60px) scale(1); opacity: 0; }
      }

      .animate-loot-float {
        animation: floatUpLoot 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      /* Tile Entry - Pop with overshoot */
      @keyframes popIn {
        0% { transform: scale(0); opacity: 0; }
        60% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }
      .tile-animation-enter { animation: popIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1); }

      /* Merge Pulse */
      @keyframes mergePulse {
        0% { transform: scale(1); filter: brightness(1); }
        40% { transform: scale(1.12); filter: brightness(1.5) contrast(1.2); box-shadow: 0 0 20px rgba(255,255,255,0.4); }
        100% { transform: scale(1); filter: brightness(1); box-shadow: 0 0 0 rgba(255,255,255,0); }
      }
      .tile-animation-merge { animation: mergePulse 0.25s ease-in-out; z-index: 20; }

      /* XP Bar Glow Pulse */
      @keyframes barGlow {
        0%, 100% { filter: brightness(1) drop-shadow(0 0 2px rgba(255,255,255,0.2)); }
        50% { filter: brightness(1.5) drop-shadow(0 0 8px rgba(255,255,255,0.5)); }
      }
      .xp-bar-glow { animation: barGlow 0.5s ease-in-out; }

      /* Screen/Tile Shake Intensities */
      @keyframes shakeSmall {
        0%, 100% { transform: translate(0, 0); }
        25% { transform: translate(-1px, 1px); }
        75% { transform: translate(1px, -1px); }
      }
      .animate-shake-sm { animation: shakeSmall 0.2s ease-in-out; } 

      /* XP Bar Shimmer */
      @keyframes shimmer {
        0% { transform: translateX(-150%) skewX(-20deg); }
        100% { transform: translateX(200%) skewX(-20deg); }
      }
      .animate-shimmer {
        animation: shimmer 2s linear infinite;
      }

      /* God Tile Pulse */
      @keyframes godwave {
        0% { transform: scale(1); opacity: 0.8; box-shadow: 0 0 20px gold; }
        100% { transform: scale(1.5); opacity: 0; box-shadow: 0 0 60px gold; }
      }
      .animate-godwave { animation: godwave 2s infinite; }

      /* VISUAL FX: Chromatic Aberration */
      @keyframes chromaticShake {
        0% { text-shadow: 2px 0 rgba(255,0,0,0.5), -2px 0 rgba(0,255,255,0.5); transform: translate(2px, 1px); }
        25% { text-shadow: -2px 0 rgba(255,0,0,0.5), 2px 0 rgba(0,255,255,0.5); transform: translate(-1px, -2px); }
        50% { text-shadow: 2px 0 rgba(255,0,0,0.5), -2px 0 rgba(0,255,255,0.5); transform: translate(-3px, 0); }
        75% { text-shadow: -2px 0 rgba(255,0,0,0.5), 2px 0 rgba(0,255,255,0.5); transform: translate(3px, 2px); }
        100% { text-shadow: 2px 0 rgba(255,0,0,0.5), -2px 0 rgba(0,255,255,0.5); transform: translate(0, 0); }
      }
      .chromatic-shake { animation: chromaticShake 0.3s ease-in-out infinite; }

      /* LIVING TILE ANIMATIONS */
      @keyframes gradient-xy {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
      }
      .animate-living-slow {
          background-size: 200% 200%;
          animation: gradient-xy 5s ease infinite;
      }
      .animate-living-fast {
          background-size: 200% 200%;
          animation: gradient-xy 2s ease infinite;
      }

      .fog-wrapper {
        position: absolute;
        bottom: 0; left: 0; width: 200%; height: 60vh; display: flex; animation: fogDrift 60s linear infinite; pointer-events: none; z-index: 20; opacity: 0.5; filter: blur(50px);
        mask-image: linear-gradient(to top, black 20%, transparent 100%);
        -webkit-mask-image: linear-gradient(to top, black 20%, transparent 100%);
      }
      .fog-piece { width: 50%; height: 100%; background: linear-gradient(90deg, transparent 0%, rgba(200, 210, 230, 0.12) 50%, transparent 100%); }
      @keyframes fogDrift { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0",
    "uuid": "https://aistudiocdn.com/uuid@^13.0.0",
    "framer-motion": "https://aistudiocdn.com/framer-motion@^11.0.0"
  }
}
</script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').then(registration => {
          console.log('SW registered:', registration);
        }).catch(error => {
          console.log('SW registration failed:', error);
        });
      });
    }
  </script>
</head>
  <body>
    <div id="root"></div>
  </body>
</html>